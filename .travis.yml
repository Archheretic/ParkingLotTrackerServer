language: node_js
node_js:
- '7.5'
- '7'
- '6'
- node
services:
- mysql
script:
- npm run snyk-auth
env:
  secure: qrZIUGu8ynWGPeziDUxSlK6oP5tESQGR7UWiI2zamD9p8PYXtE5WZpdXFGddlOUBEOpa2HexQkH2GD3A+/zi6gyLm0G/SPnPSx6PMzh2ybbOB5GRmaFjWdgoVJQRWSWwrjrfirCCZlRGMDTixUu7mQ5Ob60aOqhdwU9r1dZJhLPv2uYhNTsRRHGnhO//NSuFoPt9EK8HS9MjMxN2Pf6dQ/MsXzOsm/eAUYu0FLSk4bbjir19icpvBsjPSYOZKHF+OSdHQyzFksWSyjYpDCH1HD4jHhOmSS3QGWXoApOILDLCVkhoSl6rZfZhlE6iFr47bFfnuySm7TEgsHYySTu0XbTOmNqAv64WLhRljx/HZDDyOluboQYs08rgdaxscqqi7PGu8G0I0cVCYAvmBVRN+fE56lJbJwY0/ZbPq4ClKq6SiTdPOs4tb2+ZmpQQbJVy0yPD+PkGLavzJmKVim6wB8nhj4y7sXLYyoJkdrQunADHSlsqdDrCZpKslLE7dzkxvMcb0qga4QKnKL1Kc6/KaViK0TWJIyqDu8SXZ5Ru1Zy2eHhHyBsY4027+fkLjlhz2eSWka2FkkQT6fRhAitSRvvyiib7vPzGgRAqbTCRtbNT9vs6nPP/VH/TIUB8qRi7LE9xJkXU2ZvlkpgA4/6xcWVjNqC+vQWOqu450Bk5S+s=

before_install:
    - mysql -e 'create database shitdatabasetest;'
    - mysql -e 'USE shitdatabasetest;
      CREATE TABLE parkingLot (
      id int(11) NOT NULL AUTO_INCREMENT,
      name varchar(50) NOT NULL,
      capacity int(11) NOT NULL,
      reservedSpaces int(11) NOT NULL,
      PRIMARY KEY (id)
      ) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

      CREATE TABLE parkingLog (
      id int (11) NOT NULL AUTO_INCREMENT,
      currentParked int (11) NOT NULL,
      logDate timestamp DEFAULT NOW(),
      parkingLot_id int NOT NULL,
      PRIMARY KEY (id),
      FOREIGN KEY fk_parkingLot(parkingLot_id)
      REFERENCES parkingLot(id)
      ) ENGINE=InnoDB;'

after_success:
- npm run coveralls